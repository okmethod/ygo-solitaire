# ゲーム操作モデル

**実装箇所**: `domain/commands/`, `application/GameFacade.ts`

---

## Advance Phase: フェイズを進める

### 実行トリガー

- プレイヤー行動（なお、本アプリでは自動実行する）

### 実行条件

- 現在のフェイズから、指定したフェイズに遷移可能であること

### 実行結果（成功時）

- 指定したフェイズに遷移する

---

## Shuffle Deck: デッキをシャッフルする

### 実行トリガー

- ゲーム開始時にシャッフルする
- カード効果によりシャッフルする
- サーチ効果等、デッキ内部を確認した後にシャッフルする

### 実行条件

- 無し

### 実行結果（成功時）

- デッキ内のカードの順番がランダムに入れ替わる

---

## Draw Cards: デッキからカードをドローする

### 実行トリガー

- ドローフェイズに 1 枚ドローする（❌ 実装不要）
- カード効果により指定枚数ドローする（例: 強欲な壺）

### 実行条件

- 自分のデッキにドローする枚数分のカードが存在すること

### 実行結果（成功時）

- 指定枚数のカードが、デッキの上から順に、デッキから手札に移動する

### 実行結果（失敗時）

- ゲームに敗北する

---

## Discard Cards: 手札からカードを捨てる

### 実行トリガー

- カード発動または効果発動のコストとして捨てる（例：魔法石の採掘）
- カード効果の処理により捨てる（例：天使の施し）
- エンドフェイズ時、手札が 7 枚以上ある場合、6 枚になるように捨てる（⏳ 未実装）

### 実行条件

- 自分の手札に捨てる枚数以上のカードが存在すること

### 実行結果（成功時）

- 指定されたカードが、手札から墓地に移動する

---

## Summon Monster: モンスターを通常召喚する（⏳ 未実装）

### 実行トリガー

- プレイヤー行動（実行条件を満たす場合のみ選択可能）

### 実行条件

- Main Phase 1 （または Main Phase 2）であること
- 通常召喚またはセットを行なっていないこと（1 ターンに 1 回まで）
- 通常召喚可能なモンスターカードが手札に存在すること
- モンスターゾーンに空きがあること
- アドバンス召喚: レベル 5 以上のモンスターを召喚する場合、必要数のモンスターをリリースすること
  - レベル 5-6: 1 体のリリースが必要
  - レベル 7 以上: 2 体のリリースが必要

### 実行結果（成功時）

- 通常召喚したモンスターは手札からフィールドに移動し、「表側攻撃表示」になる

---

## Set Monster: モンスターをセットする（⏳ 未実装）

### 実行トリガー

- プレイヤー行動（実行条件を満たす場合のみ選択可能）

### 実行条件

- 「モンスターを通常召喚する」と同じ

### 実行結果（成功時）

- セットしたモンスターは手札からフィールドに移動し、「裏側守備表示」になる

---

## Release Monster: モンスターをリリースする（生贄に捧げる）

### 実行トリガー

- アドバンス召喚のコストとしてリリースする
- カード効果のコストとしてリリースする

### 実行条件

- 自分フィールド上にリリース可能なモンスターが存在すること

### 実行結果（成功時）

- 指定されたモンスターが、フィールドから墓地に移動する

---

## Activate Spell: 魔法カードを発動する

### 実行トリガー

- プレイヤー行動（実行条件を満たす場合のみ選択可能）

### 実行条件

- Main Phase 1 （または Main Phase 2）であること
- 発動可能な魔法カードが手札またはフィールドに存在すること
  - 速攻魔法カードは、セットしたターンに発動不可（先行 1 ターン目では、セットしたら発動不可）
- カードの発動条件を満たしていること

### 実行結果（成功時）

- カードが手札からフィールドに移動し、効果がチェーンに積まれる
- 効果解決後、通常魔法・速攻魔法は墓地へ送られる

---

## Activate Trap: 罠カードを発動する（❌ 実装不要）

セットした罠は、そのターン中に発動できないため、実行不可

---

## Attack: 攻撃する（❌ 実装不要）

先行 1 ターン目はバトルフェイズがないため、実行不可

---

## Flip Summon Monster: モンスターを反転召喚する（❌ 実装不要）

セットされたモンスターは、そのターン中に反転召喚できないため、実行不可

---

## Change Battle Position: モンスターの表示形式を変更する（❌ 実装不要）

召喚・特殊召喚されたモンスターは、そのターン中に表示形式を変更できないため、実行不可
