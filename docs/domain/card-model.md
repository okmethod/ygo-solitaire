# カードモデル

**実装箇所**: `domain/models/Card.ts`

---

## Card Types: カードタイプ

遊戯王のカードは 3 種類のカードに分類される。このアプリではこれを「カードタイプ」と呼ぶ。

- **Monster**: 「モンスター」カード
- **Spell**: 「魔法」カード
- **Trap**: 「罠」カード

それぞれのカードタイプは、固有のプロパティ（サブタイプ等）や、ルール（発動タイミング等）を持つ。

### Monster: モンスターカード

フィールド（モンスターゾーン）に配置し、相手プレイヤーを攻撃したり、モンスター効果を使用したりするカード。
モンスターカードの使用方法（各種召喚等）についてのルールの詳細は、 [ゲーム操作モデル](./game-operations.md) を参照。

#### モンスターカードのプロパティ

- **Name**: カード名
- **Attribute**: 属性（光、闇、炎、水、風、地、神）
- **Race**: 種族（戦士族、魔法使い族、ドラゴン族、等）
- **Level** or **Rank** or **Link**: レベル / ランク / リンク
- **ATK** and **DEF**: 攻撃力 / 守備力
- **Effect**: モンスター効果（通常モンスターを除く）
- サブタイプ（後述）

#### モンスターサブタイプ

モンスターのサブタイプは複合的な分類なため要注意。このアプリでは以下のように分類している。

- **FrameType**: フレームタイプ（カードの枠の色による分類）
  - メインデッキに入る
    - **Nomarl Monster**: 通常モンスター（クリーム色）
    - **Effect Monster**: 効果モンスター（オレンジ色）
    - **Ritual Monster**: 儀式モンスター（青色）
    - **Pendulum Monster**: ペンデュラムモンスター（⏳ 未実装）
  - エクストラデッキに入る
    - **Fusion Monster**: 融合モンスター（紫色）
    - **Synchro Monster**: シンクロモンスター（白色）
    - **XYX Monster**: エクシーズモンスター（黒色）
    - **Link Monster**: リンクモンスター（⏳ 未実装）

他の分類（リバースモンスター、デュアルモンスター、等）については、追って追加する。

### Spell: 魔法カード

手札から発動し、さまざまな効果を発揮するカード。フィールド（魔法・罠ゾーン）に配置される。
魔法カードの使用方法（発動・セット等）についてのルールの詳細は、[ゲーム操作モデル](./game-operations.md) を参照。

#### 魔法カードのプロパティ

- **Name**: カード名
- **Effect**: 魔法効果
- サブタイプ（後述）

#### 魔法カードのサブタイプ

魔法カードは、発動タイミングや効果の持続性によって 6 種類に分類される。

- **Normal Spell**: 通常魔法（基本的な魔法カード）
- **Quick-Play Spell**: 速攻魔法（相手ターンでも発動可能）
- **Continuous Spell**: 永続魔法（フィールドに残り続ける）
- **Field Spell**: フィールド魔法（フィールドゾーンに置かれる）
- **Equip Spell**: 装備魔法（モンスター 1 対に装備）
- **Ritual Spell**: 儀式魔法（儀式モンスターを召喚する）

### Trap: 罠カード

場から発動し、さまざまな効果を発揮するカード。フィールド（魔法・罠ゾーン）に配置される。
罠カードの使用方法（発動・セット等）についての詳細は、[ゲーム操作モデル](./game-operations.md) を参照。

#### 罠カードのプロパティ

- **Name**: カード名
- **Effect**: 罠効果
- サブタイプ（後述）

#### 罠カードのサブタイプ

罠カードは、発動条件や効果の持続性によって 3 種類に分類される。

- **Normal Trap**: 通常罠（基本的な罠カード）
- **Continuous Trap**: 永続罠（フィールドに残り続ける）
- **Counter Trap**: カウンター罠（カードの発動を無効化する等）

---

## 「カードデータ」と「カードインスタンス」

- **Card Data (カードデータ)**: カードごとの定義情報。1 種類のカードことに 1 つの定義がある。
- **Card Instance (カードインスタンス)**: ゲーム内における 1 枚のカード実体。同じ種類のカードでも、別インスタンスとして個別に識別する必要がある。

例）「ブラック・マジシャン」という種類のカードが、デッキに 3 枚入っている。カードデータは 1 つ。カードインスタンスは 3 つ。

**例**: 「ブラック・マジシャン」が、デッキに 3 枚入っている場合

「ブラック・マジシャン」データ: `cardId=46986414`、通常モンスター、レベル 7、闇属性、魔法使い族、...

- 「ブラック・マジシャン」インスタンス 1: `instanceId="1"`, `cardId="46986414"`, `location="deck"`, ...
- 「ブラック・マジシャン」インスタンス 2: `instanceId="2"`, `cardId="46986414"`, `location="deck"`, ...
- 「ブラック・マジシャン」インスタンス 3: `instanceId="3"`, `cardId="46986414"`, `location="deck"`, ...

両方とも同じカード ID（`cardId="46986414"`）を参照するが、別々のカードとして扱われる。

### Card Data: カードデータ

ルール上、参照されうるデータはドメイン内に定義する。（イラスト等のルールに影響しないデータは定義しない）

- **Card ID**: カード ID（カードデータを一意に識別する番号）
- **Card Types**: カードタイプ（前述の通り）
- カードタイプ固有のプロパティ群

### Card Instance: カードインスタンス

ゲーム内の個別の 1 枚のカードの実体を表す。

- **Instance ID**: インスタンス ID（ゲーム内でカードを一意に識別する番号）
- **Card ID**: カード ID（どのカードデータと紐づくか）
- **Card Location**: カードが存在している位置（後述）
- **Card Position**: カードの表示形式（後述）

---

## Card Location: カードの位置

カードはゲーム中、常にいずれかの領域（Zone）に存在する。  
詳細は [overview.md の Zones セクション](./overview.md#zones-領域) を参照。

---

## Card Position: カードの表示形式

フィールド上のカードは、「表側表示」または「裏側表示」で配置される。

- **Face-Up Position**: 表側表示（公開情報）
- **Face-Down Position**: 裏側表示（自分にとっては公開情報。ただし裏側で除外は非公開情報）

モンスターカードは、追加で「攻撃表示」または「守備表示」の分類がある。表裏との組み合わせは以下の通り。

- **Face-Up Attack Position**: 表側攻撃表示
- **Face-Up Attack Position**: 表側守備表示
- **Face-Down Defense Position**: 裏側守備表示
